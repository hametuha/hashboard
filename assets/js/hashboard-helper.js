!function(e){"use strict";const t=window.Hashboard||{},n={},a=function(){e("#hb-side-nav").height(window.innerHeight)};e(document).ready((function(){a(),e("#hb-side-nav").addClass("initialized")}));let s=null;e(window).on("resize",(function(){s&&clearTimeout(s),s=setTimeout((function(){a()}),10)})),e(document).on("click",".side-nav-toggle",(function(t){e(e(this).attr("data-target")).toggleClass("open");const n=e(".hb-sidebar-backdrop");if(n.length)n.remove();else{const t='\n          <div class="hb-sidebar-backdrop">\n            <button type="button" class="d-md-none side-nav-toggle" data-target="#hb-side-nav">\n                <i class="material-icons">close</i>\n            </button>\n          </div>\n        ';e("body").append(t)}})),e(document).on("click",".hb-sidebar-backdrop",(function(t){e(this).find(".side-nav-toggle").trigger("click")})),e(document).on("click",".hb-submenu-trigger",(function(t){t.preventDefault(),e(this).parents(".hb-menu-item").toggleClass("toggle")})),e(document).on("change",".hb-form input[type=file]",(function(t){const a=e(this).attr("name");if(!this.files.length)return void(n[a]&&(n[a]=null));const s=new FileReader;s.onload=function(e){n[a]=e.target.result},s.readAsDataURL(this.files[0])})),e(document).on("submit",".hb-form",(function(a){a.preventDefault();const s=e(this),o=s.attr("method").toUpperCase(),i=s.attr("action"),r={};s.find("input,select,textarea").each((function(t,a){const s=e(a);if(!s.attr("name"))return!0;switch(e(a).attr("type")){case"checkbox":case"radio":s.attr("checked")&&(r[s.attr("name")]=s.val());break;case"file":r[s.attr("name")]=n[s.attr("name")];break;default:r[s.attr("name")]=s.val()}})),s.addClass("loading"),e.hbRest(o,i,r).done((function(n){t.toast('<span><i class="material-icons success">done</i>'+n.message+"</span>",4e3),e(document).trigger("updated.form.hashboard",[s,n])})).fail((function(e){t.toast('<span><i class="material-icons error">error</i>'+e.responseJSON.message+"</span>",4e3)})).always((function(){s.removeClass("loading")}))})),e(document).on("updated.form.hashboard",(function(e,t,n){"form-picture"===t.attr("id")&&(t.find(".avatar").attr("src",n.avatar_url),t.get(0).reset())})),e(document).on("click",".hb-mail-resend, .hb-mail-cancel",(function(n){n.preventDefault();const a=e(this),s=a.hasClass("hb-mail-resend")?"PUT":"DELETE",o=a.parents("form");o.addClass("loading"),e.hbRest(s,e(this).attr("href")).done((function(e){"DELETE"===s&&a.parents(".hb-warning").remove(),t.toast('<span><i class="material-icons success">done</i>'+e.message+"</span>",4e3)})).fail((function(e){t.toast('<span><i class="material-icons error">error</i>'+e.responseJSON.message+"</span>",4e3)})).always((function(){o.removeClass("loading")}))}));const o=function(t){const n=t.find(".hb-status-display");if(!n.length)return;const a=n.attr("data-endpoint");a&&(n.addClass("loading loading-small"),e.hbRest("GET",a).done((function(e){n.removeClass("success error"),e.success?n.addClass("success"):n.addClass("error"),n.text(e.message)})).fail((function(e){n.addClass("error"),e.responseJSON.message&&n.text(e.responseJSON.message)})).always((function(){n.removeClass("loading loading-small")})))};e(document).on("updated.form.hashboard",(function(e,t,n){o(t)})),e(document).ready((function(){e(".hb-form").each((function(t,n){o(e(n))}))}))}(jQuery);