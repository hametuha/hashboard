!function(){const e=jQuery,{apiFetch:t}=wp,{addQueryArgs:a}=wp.url,{toast:n}=hb.plugins;e(document).ready(function(){e(".hb-sidebar").addClass("initialized")}),e(document).on("click",".side-nav-toggle",function(){e(e(this).attr("data-target")).toggleClass("open");const t=e(".hb-sidebar-backdrop");t.length?t.remove():e("body").append('<div class="hb-sidebar-backdrop"></div>')}),e(document).on("click",".hb-sidebar-backdrop",function(){e(".hb-sidebar").removeClass("open"),e(this).remove()}),e(document).on("click",".hb-submenu-trigger",function(t){t.preventDefault(),e(this).parents(".hb-menu-item").toggleClass("toggle")}),e(document).on("click",".hb-mail-resend, .hb-mail-cancel",function(a){a.preventDefault();const s=e(this),r=s.hasClass("hb-mail-resend")?"PUT":"DELETE",o=s.parents("form");o.addClass("loading"),t({url:o.attr("action"),method:r}).then(e=>{"DELETE"===r&&s.parents(".hb-warning").remove(),n(e.message||"Success",{icon:"done",type:"success"})}).catch(e=>{n(e.message||"Error occurred",{icon:"error",type:"error"})}).finally(()=>{o.removeClass("loading")})});const s={};e(document).on("change",".hb-form input[type=file]",function(){const t=e(this).attr("name");if(!this.files.length)return void(s[t]&&(s[t]=null));const a=new FileReader;a.onload=function(e){s[t]=e.target.result},a.readAsDataURL(this.files[0])}),e(document).on("submit",".hb-form",function(r){r.preventDefault();const o=e(this),c=o.attr("method").toUpperCase();let i=o.attr("action");const d={};o.find("input,select,textarea").each(function(t,a){const n=e(a);if(!n.attr("name"))return!0;switch(e(a).attr("type")){case"checkbox":case"radio":n.attr("checked")&&(d[n.attr("name")]=n.val());break;case"file":d[n.attr("name")]=s[n.attr("name")];break;default:d[n.attr("name")]=n.val()}}),o.addClass("loading");const l={method:c};["POST","PUT","PATCH"].includes(c)?l.data=d:i=a(i,d),l.url=i,t(l).then(function(t){n(t.message||"Success",{icon:"done",type:"success"}),e(document).trigger("updated.form.hashboard",[o,t])}).catch(function(e){n(e.message||"Error occurred",{icon:"error",type:"error"})}).finally(function(){o.removeClass("loading")})});const r=function(e){const a=e.find(".hb-status-display");if(!a.length)return;const n=a.attr("data-endpoint");n&&(a.addClass("loading loading-small"),t({url:n,method:"GET"}).then(e=>{a.removeClass("success error"),e.success?a.addClass("success"):a.addClass("error"),a.text(e.message)}).catch(e=>{a.addClass("error"),e.message&&a.text(e.message)}).finally(()=>{a.removeClass("loading loading-small")}))};e(document).on("updated.form.hashboard",function(e,t){r(t)}),e(document).ready(function(){e(".hb-form").each(function(t,a){r(e(a))})}),e(document).on("updated.form.hashboard",function(e,t,a){switch(t.attr("id")){case"form-picture":t.find(".avatar").attr("src",a.avatar_url),t.get(0).reset();break;case"form-password":t.trigger("reset")}})}();