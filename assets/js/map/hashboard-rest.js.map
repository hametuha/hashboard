{"version":3,"sources":["hashboard-rest.js"],"names":["$","extend","hbRest","method","url","data","toUpperCase","test","HashRest","root","args","beforeSend","xhr","setRequestHeader","nonce","query","prop","hasOwnProperty","push","encodeURIComponent","length","join","ajax","hbRestError","response","msg","error","responseJSON","message","Hashboard","toast","jQuery"],"mappings":"AAAA,cAGA,SAAWA,GAITA,EAAEC,QAUAC,OAAQ,SAAUC,EAAQC,EAAKC,GAC7BF,EAASA,EAAOG,cACT,eAAeC,KAAKH,KACzBA,EAAMI,SAASC,KAAOL,EAGxB,IAAIM,IACFP,OAAQA,EACRQ,WAAY,SAAUC,GACpBA,EAAIC,iBAAiB,aAAcL,SAASM,QAGhD,IAAIT,EACF,OAAQF,GACN,IAAK,MACL,IAAK,OACL,IAAK,OACHO,EAAKL,KAAOA,CACZ,MACF,SACE,GAAIU,KACJ,KAAK,GAAIC,KAAQX,GACXA,EAAKY,eAAeD,IACtBD,EAAMG,KAAKF,EAAO,IAAMG,mBAAmBd,EAAKW,IAGhDD,GAAMK,SACRhB,GAAO,IAAMW,EAAMM,KAAK,MAMhC,MADAX,GAAKN,IAAMA,EACJJ,EAAEsB,KAAKZ,IAEhBa,YAAa,WACX,MAAO,UAASC,GACd,GAAIC,GAAMjB,SAASkB,KACfF,GAASG,cAAgBH,EAASG,aAAaC,UACjDH,EAAMD,EAASG,aAAaC,SAE9BC,UAAUC,MAAM,4CAA8CL,EAAK,UAIxEM","file":"../hashboard-rest.js","sourcesContent":["/*global HashRest: false*/\n/*global Hashboard: false*/\n\n(function ($) {\n\n  'use strict';\n\n  $.extend({\n    /**\n     * Short hand for rest API\n     *\n     * @scope {jQuery}\n     * @param {String} method\n     * @param {String} url\n     * @param {Object} data\n     * @param {Boolean} processData\n     */\n    hbRest: function (method, url, data) {\n      method = method.toUpperCase();\n      if ( ! /^https?:\\/\\//.test(url) ) {\n        url = HashRest.root + url;\n      }\n\n      let args = {\n        method: method,\n        beforeSend: function (xhr) {\n          xhr.setRequestHeader('X-WP-Nonce', HashRest.nonce);\n        }\n      };\n      if (data) {\n        switch (method) {\n          case 'PUT':\n          case 'POST':\n          case 'PUSH':\n            args.data = data;\n            break;\n          default:\n            let query = [];\n            for (let prop in data) {\n              if (data.hasOwnProperty(prop)) {\n                query.push(prop + '=' + encodeURIComponent(data[prop]));\n              }\n            }\n            if (query.length) {\n              url += '?' + query.join('&');\n            }\n            break;\n        }\n      }\n      args.url = url;\n      return $.ajax(args);\n    },\n    hbRestError: function () {\n      return function(response) {\n        let msg = HashRest.error;\n        if (response.responseJSON && response.responseJSON.message) {\n          msg = response.responseJSON.message;\n        }\n        Hashboard.toast('<i class=\"material-icons error\">close</i>' + msg, 4000);\n      };\n    }\n  });\n})(jQuery);\n"]}